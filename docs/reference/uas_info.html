<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract metadata info from UAS images — uas_info • uasimg</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract metadata info from UAS images — uas_info"><meta name="description" content="Extracts info from geotagged images taken from a drone"><meta property="og:description" content="Extracts info from geotagged images taken from a drone"><meta property="og:image" content="https://ucanr-igis.github.io/uasimg/logo.png"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-68H6V5WRXH"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-68H6V5WRXH');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">uasimg</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">1.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/uasimg.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/catalog_wrkflw.html">Cataloging Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/flight_metadata.html">Flight Metadata</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-presentations" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Presentations</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-presentations"><li><a class="dropdown-item" href="https://ucanr-igis.github.io/uasimg-res/pres/intro-uasimg_2024-06-27.html">Drone Image Utilities for R Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/ucanr-igis/uasimg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract metadata info from UAS images</h1>
      <small class="dont-index">Source: <a href="https://github.com/ucanr-igis/uasimg/blob/master/R/uas_info.R" class="external-link"><code>R/uas_info.R</code></a></small>
      <div class="d-none name"><code>uas_info.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extracts info from geotagged images taken from a drone</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">uas_info</span><span class="op">(</span></span>
<span>  <span class="va">img_dirs</span>,</span>
<span>  ext <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alt_agl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fwd_overlap <span class="op">=</span> <span class="va">fp</span>,</span>
<span>  cameras <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metadata <span class="op">=</span> <span class="st">"metadata.*\\.txt"</span>,</span>
<span>  path2name_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_exiftoolr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exiftool <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exif_csv <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  update_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-img-dirs">img_dirs<a class="anchor" aria-label="anchor" href="#arg-img-dirs"></a></dt>
<dd><p>Directory(s) where the image files reside</p></dd>


<dt id="arg-ext">ext<a class="anchor" aria-label="anchor" href="#arg-ext"></a></dt>
<dd><p>An optional file extension</p></dd>


<dt id="arg-alt-agl">alt_agl<a class="anchor" aria-label="anchor" href="#arg-alt-agl"></a></dt>
<dd><p>The elevation above ground level in meters (optional for images with the relevative altitude saved)</p></dd>


<dt id="arg-fp">fp<a class="anchor" aria-label="anchor" href="#arg-fp"></a></dt>
<dd><p>Compute image foot prints, T/F</p></dd>


<dt id="arg-fwd-overlap">fwd_overlap<a class="anchor" aria-label="anchor" href="#arg-fwd-overlap"></a></dt>
<dd><p>Whether or not to compute the amount of overlap between one image and the next, T/F</p></dd>


<dt id="arg-cameras">cameras<a class="anchor" aria-label="anchor" href="#arg-cameras"></a></dt>
<dd><p>Location of the cameras.csv file. Is NULL the package csv file will be used.</p></dd>


<dt id="arg-metadata">metadata<a class="anchor" aria-label="anchor" href="#arg-metadata"></a></dt>
<dd><p>A filename pattern for a metadata file, or a metadata list object (see Details)</p></dd>


<dt id="arg-path-name-fun">path2name_fun<a class="anchor" aria-label="anchor" href="#arg-path-name-fun"></a></dt>
<dd><p>A function to generate the default short name (see Details)</p></dd>


<dt id="arg-use-exiftoolr">use_exiftoolr<a class="anchor" aria-label="anchor" href="#arg-use-exiftoolr"></a></dt>
<dd><p>Whether to use the exiftoolr package, logical</p></dd>


<dt id="arg-exiftool">exiftool<a class="anchor" aria-label="anchor" href="#arg-exiftool"></a></dt>
<dd><p>The path to the exiftool command line tool (omit if on the OS path). Ignored if use_exiftoolr = TRUE.</p></dd>


<dt id="arg-exif-csv">exif_csv<a class="anchor" aria-label="anchor" href="#arg-exif-csv"></a></dt>
<dd><p>The file name of a new csv file where the exif data will be saved (omit to make a temp one)</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Logical or a directory where EXIF data should be cached (see Details)</p></dd>


<dt id="arg-update-cache">update_cache<a class="anchor" aria-label="anchor" href="#arg-update-cache"></a></dt>
<dd><p>Whether to update the cache</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Don't show messages</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A UAS Image Collection object. This is a named list with elements for
image centroids (as a sf data frame), footprints, total area, minimum convex polygon,
total directory size, the data flown, and external metadata.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This will read the EXIF header data from a directory of image files, and extract
the centroids and estimated ground-footprints. Extracting the image locations requires that the images have
geostamps (common in most drone images but some drones require an extra processing step to geostamp the images).
To index a specific file type, you can pass a file extension to <code>ext</code> (not case sensitive).</p>
<p>Estimating the ground-footprints (<code>fp = TRUE</code>) further requires that the camera parameters are known,
the flight elevation about ground level is either saved in the EXIF info or provided in
the <code>alt_agl</code> argument (in meters). If <code>alt_agl</code> is passed, it will override any elevation data
in the EXIF info. Ground-footprints are estimates only. They assume the camera was at nadir (common in
mapping work but there are exceptions) and only as accurate as the provided altitude (which is typically the least
accurate GPS coordinate).</p>
<p>Camera parameters are saved in a csv file called <em>cameras.csv</em>. The package ships with a CSV file containing
many popular drone cameras. If your drone camera is not in the database, you can create your own
<em>cameras.csv</em> file (see <code><a href="uas_cameras.html">uas_cameras</a></code> for details) and pass the file name as the
<code>cameras</code> argument. Or <a href="https://github.com/ucanr-igis/uasimg/issues" class="external-link">contact</a> the package maintainer
to add your camera to the database.</p>
<p>This function uses a free command line tool called EXIFtool to read the EXIF data. You can install this by
running <code><a href="https://joshobrien.github.io/exiftoolr/reference/install_exiftool.html" class="external-link">install_exiftool</a></code>. Alternately you can download exiftool
from <a href="http://www.sno.phy.queensu.ca/~phil/exiftool/" class="external-link">http://www.sno.phy.queensu.ca/~phil/exiftool/</a>. After you download it, rename the executable file,
'exiftool(-k).exe' to 'exiftool.exe', and save it somewhere on your system's PATH (e.g., c:\Windows).</p>
<p><code>metadata</code> is an optional argument to pass supplemental flight metadata that can not be extracted from the
images (e.g., location name, pilot). For details, see the Vignette on Flight Metadata
<code><a href="../articles/flight_metadata.html">vignette("flight_metadata", package = "uasimg")</a></code>.</p>
<p><code>metadata</code> can also be a named list containing
metadata fields / values. For supported field names, see <code><a href="../articles/flight_metadata.html">vignette("flight_metadata", package = "uasimg")</a></code>.</p>
<p><code>metadata</code> can also be a filename regular expression (pattern) for a metadata text file
(for details on how to write a pattern expression, see <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></code>). This is the recommended
way to enter metadata, because the little text files move with the images.</p>
<p>If multiple files match the pattern expression, they will all be read. This allows you for example to have a file called
<em>metadata_org.txt</em> with organizational info (such as a contact person), and another called <em>metadata.txt</em> with info
about that specific flight (e.g., the pilot or wind conditions).
Metadata text files should be plain text in YAML format (the easiest way to create new metadata text files
is using <code><a href="uas_metadata_make.html">uas_metadata_make</a></code>.) Each line should contain a key:value pair (with no quotes or delimiters).
Lines starting with a hash or forward slash will be ignored. Example:</p>
<div class="sourceCode"><pre><code>
name_short: hrec_wtrshd2_flt03

name_long: Hopland Research and Extension Center, Watershed II Flight 3

data_url: https://ucdavis.box.com/s/dp0sdfssxxxxxsdf

pilot: Andy Lyons

description: These data were collected as part of a restoration monitoring program.

notes: We had to pause the mission about half way through as a hawk was getting close, hence there is a time lapse
of about 45 seconds. Pix4Dcapture was used as the mission planning software with an overlap of 75<!-- %. -->
</code></pre></div>

<p><code>path2name_fun</code> can be a function to generate a default short name for the flight. The function should
be written to accept one and only one argument - a directory path. This can be useful if the default
short names should be constructed from pieces of the image directory path. See also <code><a href="uas_path2name_fun.html">uas_path2name_fun</a></code>.</p>
<p><code>cache</code> can be a logical value or the name of a directory where EXIF data gets cached.
If <code>cache = TRUE</code>, the default cache directory will be used (<code>~/.R/uasimg</code>). The only information
that gets cached is image metadata. Flight metadata is never cached (see the Vignette on Flight Metadata
for a discussion of image and flight metadata). Cached EXIF data is linked
to a directory of images based on the directory name and total size of all image files.
So if images are added or removed from the directory, the cache will be automatically rebuilt
the next time the function is run. <code>update_cache</code> is a logical value
which forces an update of cached data when TRUE.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="uas_getcache.html">uas_getcache</a></code>, <code><a href="uas_report.html">uas_report</a></code>, <code><a href="uas_path2name_fun.html">uas_path2name_fun</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andy Lyons.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

